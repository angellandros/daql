\documentclass[DIN, pagenumber=false, fontsize=11pt, parskip=half]{scrartcl}

\usepackage{tikz}
\usepackage{tikz-qtree}

\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage{longtable}

\usepackage{amsmath}

\usepackage{enumitem}

\usepackage[bottom=1in,top=0.5in,left=0.7in,right=0.7in]{geometry}
\geometry{a4paper}

\usepackage{hyperref}


\setlength{\parindent}{0em}

% new notation

\newcommand{\prob}[1]{\mathbb{P}\left[ #1 \right]}
\newcommand{\probm}[2]{\mathbb{P}\left[ #1 ~\middle|~ #2 \right]}
\newcommand{\D}{\mathcal{D}}

% set section in CM
\setkomafont{section}{\normalfont\bfseries\Large}

\newcommand{\mytitle}[1]{{\noindent\Large\textbf{#1}}}
\newcommand{\mysection}[1]{\textbf{\section*{#1}}}
\newcommand{\mysubsection}[2]{\romannumeral #1) #2}

% fonts

\usepackage[T1]{fontenc}
\usepackage{tgpagella}
\usepackage[euler-digits,euler-hat-accent]{eulervm}
\usepackage{amssymb}
\usepackage{graphicx}

\newcommand{\inc}[1]{\includegraphics[scale=0.4]{fig#1b.pdf} & \includegraphics[scale=0.4]{fig#1a.pdf}}

%===================================
\begin{document}

\tikzset{every tree node/.style={minimum width=2em,draw,circle},
         blank/.style={draw=none},
         edge from parent/.style=
         {draw, edge from parent path={(\tikzparentnode) -- (\tikzchildnode)}},
         level distance=1.5cm}

\noindent\textbf{Data Analysis and Query Languages} \hfill \textbf{Albert-Ludwigs-Universit√§t Freiburg}\\
Sommersemester 2018 \hfill Mohammad-Ali A'R\^ABI \& Youssef EL-HASSANI\\

\mytitle{~~~~3. Exercise Sheet: Content-based RS \& Similarity \hfill \today}


%===================================
\mysection{Exercise 1: Content-Based Recommender}

\begin{enumerate}[label=(\alph*)]

\item % a)
Given the vector space model $\mathcal{V} = \{\mathrm{costumes}, \mathrm{halloween}, \mathrm{recommender}, \mathrm{system}, \mbox{matrix-factorizatoin}\}$, we can represent the snippets with the vectors lying in the rows of the following table:

\begin{table}[htb]
\centering
\label{tab:bob-and-5}
\begin{tabular}{|l|ccccc|c|}
\hline
   & costumes & halloween & recommender & system & matrix-factorization & preference \\
   \hline \hline
   $D_1$ & 1 & 1 & 0 & 0 & 0 & 1 \\
   $D_2$ & 0 & 1 & 0 & 0 & 0 & 1 \\
   $D_3$ & 1 & 0 & 0 & 0 & 0 & n/a \\
   $D_4$ & 0 & 0 & 1 & 1 & 0 & 0 \\
   $D_5$ & 0 & 0 & 1 & 1 & 1 & n/a \\
   \hline
\end{tabular}
\caption{TF representation of the snippets, together with Bob's preference}
\end{table}

\item % b)
Denote Bob's preference by the random variable $\ell$. We are interested in calculating
\[
\probm{\ell = 1}{\D_i} = \frac{\prod_j \probm{\D_i^j}{\ell = 1}\prob{\ell = 1}}{\prob{\D_i}},
\]
with $\D_i^j$ denoting $D^j = D_i^j$ and $\D_i$ denoting $\bigwedge_j \D_i^j$.

For the case of $i=3$,
\begin{eqnarray*}
\prod_j \probm{\D_3^j}{\ell = 1} &=& \probm{D^1 = 1}{\ell = 1} \times \probm{D^2 = 0}{\ell = 1} \times \probm{D^3 = 0}{\ell = 1} \times \\
&& \probm{D^4 = 0}{\ell = 1} \times \probm{D^5 = 0}{\ell = 1} \\
&=& 0.5 \times 0 \times 1 \times 1 \times 1 \\
&=& 0.
\end{eqnarray*}

Hence $\probm{\ell = 1}{\D_3} = 0$. For the case of $i = 5$ also we have $\probm{D^2 = 0}{\ell=1} = 0$, hence $\probm{\ell = 1}{\D_5} = 0$. So, there won't be any preference between $D_3$ and $D_5$.

\item % c)

We have $D^+ = \{D_1, D_2\}$ and $D^- = \{D_4\}$. So
\begin{eqnarray*}
u_p &=& \beta \left( \frac{1}{|D^+|} \sum_{d \in D^+} d \right) - \gamma \left( \frac{1}{|D^-|} \sum_{d \in D^-} d \right) \\
&=& 0.4 \left( \begin{bmatrix} 1 \\ 1 \\ 0 \\ 0 \\ 0 \end{bmatrix} + \begin{bmatrix} 0 \\ 1 \\ 0 \\ 0 \\ 0 \end{bmatrix} \right) - 0.2 \begin{bmatrix} 0 \\ 0 \\ 1 \\ 1 \\ 0 \end{bmatrix} \\
&=& \begin{bmatrix} 0.4 & 0.8 & -0.2 & -0.2 & 0 \end{bmatrix}^T.
\end{eqnarray*}

\item
Comparing Bob's profile $u_p$ with $D_3$ and $D_5$ with cosine similarity
\[
\mathrm{sim}(A, B) = \frac{\left\langle A, B \right\rangle}{\|A\| \cdot \|B\|},
\]
we have $\mathrm{sim}(u_p, D_3) \approx 0.426$ and $\mathrm{sim}(u_p, D_5) \approx -0.246$. Hence $D_3$ is recommended to Bob.

\end{enumerate}
\end{document}
